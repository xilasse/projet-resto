<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion Restaurant - Administration</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-left">
                <h1>üçΩÔ∏è <span class="restaurant-name">Gestion Restaurant</span></h1>
            </div>
            <nav class="nav">
                <button id="menuTab" class="nav-btn active">Menu</button>
                <button id="tablesTab" class="nav-btn">Tables</button>
                <button id="ordersTab" class="nav-btn">Commandes</button>
                <button id="stockTab" class="nav-btn">Stock</button>
            </nav>
            <div class="header-right">
                <div class="restaurant-info">
                    <span class="current-restaurant" id="currentRestaurant">Chargement...</span>
                    <button id="switchRestaurantBtn" class="switch-restaurant-btn" title="Changer de restaurant" style="display: none;">üîÑ</button>
                </div>
                <button id="logoutBtn" class="logout-btn">D√©connexion</button>
            </div>
        </header>

        <main class="main-content">
            <!-- Section Gestion du Menu -->
            <section id="menuSection" class="section active">
                <div class="section-header">
                    <h2>üçΩÔ∏è Gestion du Menu</h2>
                    <div class="header-buttons">
                        <select id="categoryFilter" class="category-filter">
                            <option value="">Toutes les cat√©gories</option>
                            <option value="aperitif">üç∏ Ap√©ritifs</option>
                            <option value="entree">ü•ó Entr√©es</option>
                            <option value="plat">üçΩÔ∏è Plats</option>
                            <option value="dessert">üç∞ Desserts</option>
                            <option value="boisson_froide">üßä Boissons froides</option>
                            <option value="boisson_chaude">‚òï Boissons chaudes</option>
                            <option value="boisson_alcoolise">üç∑ Boissons alcoolis√©es</option>
                        </select>
                        <button id="initMenuBtn" class="btn btn-warning">üçΩÔ∏è Initialiser Menu</button>
                        <button id="addMenuItemBtn" class="btn btn-primary">Ajouter un plat</button>
                    </div>
                </div>
                <div class="menu-grid" id="menuGrid">
                    <!-- Les √©l√©ments du menu seront ajout√©s dynamiquement -->
                </div>
            </section>

            <!-- Section Gestion des Tables -->
            <section id="tablesSection" class="section">
                <div class="section-header">
                    <h2>Disposition des Tables</h2>
                    <div class="header-buttons">
                        <button id="addRoomBtn" class="btn btn-secondary">Ajouter une salle</button>
                        <button id="addTableBtn" class="btn btn-primary">Ajouter une table</button>
                    </div>
                </div>
                <div class="rooms-container" id="roomsContainer">
                    <!-- Les salles seront affich√©es ici -->
                </div>
            </section>

            <!-- Section Commandes -->
            <section id="ordersSection" class="section">
                <div class="section-header">
                    <h2>üìã Commandes en cours</h2>
                    <div class="header-buttons">
                        <button id="refreshOrdersBtn" class="btn btn-secondary">üîÑ Actualiser</button>
                        <select id="orderStatusFilter" class="status-filter">
                            <option value="">Tous les statuts</option>
                            <option value="en_attente">En attente</option>
                            <option value="en_preparation">En pr√©paration</option>
                            <option value="pret">Pr√™t</option>
                            <option value="servi">Servi</option>
                        </select>
                    </div>
                </div>
                <div class="orders-stats">
                    <div class="stat-card">
                        <h3>En attente</h3>
                        <span id="pendingOrdersCount">0</span>
                    </div>
                    <div class="stat-card">
                        <h3>En pr√©paration</h3>
                        <span id="preparingOrdersCount">0</span>
                    </div>
                    <div class="stat-card">
                        <h3>Pr√™ts</h3>
                        <span id="readyOrdersCount">0</span>
                    </div>
                </div>
                <div class="orders-grid" id="ordersGrid">
                    <!-- Les commandes seront affich√©es ici -->
                </div>
            </section>

            <!-- Section Stock -->
            <section id="stockSection" class="section">
                <div class="section-header">
                    <h2>üì¶ Gestion des Stocks d'Ingr√©dients</h2>
                    <div class="header-buttons">
                        <button id="addIngredientBtn" class="btn btn-primary">Ajouter un Ingr√©dient</button>
                        <button id="stockAlertBtn" class="btn btn-warning">‚ö†Ô∏è Alertes Stock</button>
                    </div>
                </div>
                <div class="stock-stats">
                    <div class="stat-card">
                        <h3>Total Ingr√©dients</h3>
                        <span id="totalIngredients">0</span>
                    </div>
                    <div class="stat-card alert">
                        <h3>Stock Faible</h3>
                        <span id="lowStockCount">0</span>
                    </div>
                    <div class="stat-card">
                        <h3>Valeur Stock</h3>
                        <span id="totalStockValue">0‚Ç¨</span>
                    </div>
                </div>
                <div class="stock-grid" id="stockGrid">
                    <!-- Le stock sera affich√© ici -->
                </div>
            </section>
        </main>
    </div>

    <!-- Modal pour ajouter/modifier un plat -->
    <div id="menuItemModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3 id="modalTitle">Ajouter un plat</h3>
            <form id="menuItemForm">
                <div class="form-group">
                    <label for="itemName">Nom du plat:</label>
                    <input type="text" id="itemName" required>
                </div>
                <div class="form-group">
                    <label for="itemDescription">Description:</label>
                    <textarea id="itemDescription"></textarea>
                </div>
                <div class="form-group">
                    <label for="itemPrice">Prix (‚Ç¨):</label>
                    <input type="number" id="itemPrice" step="0.01" required>
                </div>
                <div class="form-group">
                    <label for="itemCategory">Cat√©gorie:</label>
                    <select id="itemCategory" required>
                        <option value="aperitif">üç∏ Ap√©ritifs</option>
                        <option value="entree">ü•ó Entr√©es</option>
                        <option value="plat">üçΩÔ∏è Plats</option>
                        <option value="dessert">üç∞ Desserts</option>
                        <option value="boisson_froide">üßä Boissons froides</option>
                        <option value="boisson_chaude">‚òï Boissons chaudes</option>
                        <option value="boisson_alcoolise">üç∑ Boissons alcoolis√©es</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="itemStock">Stock initial:</label>
                    <input type="number" id="itemStock" min="0">
                </div>
                <div class="form-group">
                    <label for="itemImage">URL de l'image:</label>
                    <input type="url" id="itemImage">
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Sauvegarder</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal()">Annuler</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal pour ajouter une table -->
    <div id="tableModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>Ajouter une table</h3>
            <form id="tableForm">
                <div class="form-group">
                    <label for="tableNumber">Num√©ro de table:</label>
                    <input type="number" id="tableNumber" min="1" required>
                </div>
                <div class="form-group">
                    <label for="tableRoom">Salle:</label>
                    <select id="tableRoom" required>
                        <option value="">-- Choisir une salle --</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Cr√©er la table</button>
                    <button type="button" class="btn btn-secondary" onclick="closeTableModal()">Annuler</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal pour ajouter un ingr√©dient -->
    <div id="ingredientModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>Ajouter un Ingr√©dient</h3>
            <form id="ingredientForm">
                <div class="form-group">
                    <label for="ingredientName">Nom de l'ingr√©dient:</label>
                    <input type="text" id="ingredientName" required placeholder="Ex: Tomates, Fromage, Viande hach√©e...">
                </div>
                <div class="form-group">
                    <label for="ingredientUnit">Unit√© de mesure:</label>
                    <select id="ingredientUnit" required>
                        <option value="">-- Choisir une unit√© --</option>
                        <option value="kg">Kilogrammes (kg)</option>
                        <option value="g">Grammes (g)</option>
                        <option value="L">Litres (L)</option>
                        <option value="mL">Millilitres (mL)</option>
                        <option value="unit√©">Unit√©s</option>
                        <option value="bo√Æte">Bo√Ætes</option>
                        <option value="sachet">Sachets</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="ingredientStock">Stock initial:</label>
                    <input type="number" id="ingredientStock" min="0" step="0.1" value="0" required>
                </div>
                <div class="form-group">
                    <label for="ingredientMinStock">Seuil d'alerte:</label>
                    <input type="number" id="ingredientMinStock" min="0" step="0.1" value="0" placeholder="Stock minimum avant alerte">
                </div>
                <div class="form-group">
                    <label for="ingredientCost">Co√ªt par unit√© (‚Ç¨) - optionnel:</label>
                    <input type="number" id="ingredientCost" min="0" step="0.01" placeholder="0.00">
                </div>
                <div class="form-group">
                    <label for="ingredientSupplier">Fournisseur - optionnel:</label>
                    <input type="text" id="ingredientSupplier" placeholder="Nom du fournisseur">
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Ajouter l'Ingr√©dient</button>
                    <button type="button" class="btn btn-secondary" onclick="app.closeIngredientModal()">Annuler</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal pour ajouter une salle -->
    <div id="roomModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>Ajouter une salle</h3>
            <form id="roomForm">
                <div class="form-group">
                    <label for="roomName">Nom de la salle:</label>
                    <input type="text" id="roomName" required placeholder="Ex: Salle principale, Terrasse, VIP...">
                </div>
                <div class="form-group">
                    <label for="roomWidth">Largeur (en pixels):</label>
                    <input type="number" id="roomWidth" min="300" max="800" value="600" required>
                </div>
                <div class="form-group">
                    <label for="roomHeight">Hauteur (en pixels):</label>
                    <input type="number" id="roomHeight" min="200" max="600" value="400" required>
                </div>
                <div class="form-group">
                    <label for="roomColor">Couleur de fond:</label>
                    <select id="roomColor">
                        <option value="#f8f9fa">Gris clair</option>
                        <option value="#e3f2fd">Bleu clair</option>
                        <option value="#f3e5f5">Violet clair</option>
                        <option value="#e8f5e8">Vert clair</option>
                        <option value="#fff3e0">Orange clair</option>
                        <option value="#ffebee">Rose clair</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Cr√©er la salle</button>
                    <button type="button" class="btn btn-secondary" onclick="closeRoomModal()">Annuler</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal pour √©diter une salle -->
    <div id="editRoomModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>Modifier la salle</h3>
            <form id="editRoomForm">
                <input type="hidden" id="editRoomId">
                <div class="form-group">
                    <label for="editRoomName">Nom de la salle:</label>
                    <input type="text" id="editRoomName" required placeholder="Ex: Salle principale, Terrasse, VIP...">
                </div>
                <div class="form-group">
                    <label for="editRoomWidth">Largeur (en pixels):</label>
                    <input type="number" id="editRoomWidth" min="300" max="1200" required>
                    <small>Attention: R√©duire la taille peut d√©placer les tables existantes</small>
                </div>
                <div class="form-group">
                    <label for="editRoomHeight">Hauteur (en pixels):</label>
                    <input type="number" id="editRoomHeight" min="200" max="800" required>
                    <small>Attention: R√©duire la taille peut d√©placer les tables existantes</small>
                </div>
                <div class="form-group">
                    <label for="editRoomColor">Couleur de fond:</label>
                    <select id="editRoomColor">
                        <option value="#f8f9fa">Gris clair</option>
                        <option value="#e3f2fd">Bleu clair</option>
                        <option value="#f3e5f5">Violet clair</option>
                        <option value="#e8f5e8">Vert clair</option>
                        <option value="#fff3e0">Orange clair</option>
                        <option value="#ffebee">Rose clair</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Sauvegarder les modifications</button>
                    <button type="button" class="btn btn-secondary" onclick="app.closeEditRoomModal()">Annuler</button>
                </div>
            </form>
        </div>
    </div>

    <script src="/js/auth.js"></script>
    <script src="/js/app.js"></script>
</body>
</html>